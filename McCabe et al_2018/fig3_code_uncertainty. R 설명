fig3_code_uncertainty.R 코드는 McCabe et al. (2018) 논문에서 언급된 Figure 3을 재현하는 데 사용되는 R 스크립트입니다. 
이 그림은 샘플 크기(150과 500)에 따른 신뢰구간의 차이를 시각화하여, 샘플 크기가 결과의 불확실성에 미치는 영향을 보여줍니다.

---
 Fig. 3의 목적 및 설명
- 이 그림은 샘플 크기가 단순 기울기 추정치의 신뢰 구간(uncertainty)에 미치는 영향을 보여줍니다.
- 동일한 회귀 모델에서 샘플 크기가 작은 경우와 큰 경우를 비교하며, 단순 기울기와 그 신뢰 구간이 샘플 크기에 따라 어떻게 달라지는지 설명합니다.

 세부 설명
1. 샘플 크기 비교:
   - (a) 패널: 샘플 크기 \( N = 150 \).
   - (b) 패널: 샘플 크기 \( N = 500 \).

2. 결과의 시각화:
   - 각 패널에서 \( X \)의 값이 \( 1 SD \) 아래 및 위에서 \( Z \)의 값에 따라 단순 기울기(slope)를 나타냄.
   - 신뢰 구간(95% Confidence Interval)은 각 단순 기울기 곡선 주위에 음영으로 표시됨.

3. 주요 관찰:
   - 샘플 크기가 작을수록(패널 a) 신뢰 구간이 더 넓어 추정치의 불확실성이 증가.
   - 샘플 크기가 클수록(패널 b) 신뢰 구간이 더 좁아져 추정치의 정확성이 향상.

 결론
Fig. 3은 데이터의 크기와 분석 결과의 신뢰도 사이의 상관관계를 강조합니다. 더 큰 샘플 크기는 더 좁은 신뢰 구간을 제공하며, 이는 결과에 대한 더 큰 확신을 의미합니다. 



---

fig3_code_uncertainty.R 코드 설명


 1. 데이터 로드
- 외부 데이터 가져오기: 
  - `RCurl` 패키지를 사용하여 GitHub에서 데이터를 불러옵니다.
    - `n150`: 샘플 크기 150에 대한 시뮬레이션 데이터.
    - `n500`: 샘플 크기 500에 대한 시뮬레이션 데이터.
  - `geom_ribbon` 및 `geom_line`으로 플롯을 생성하기 위해 데이터 프레임을 필터링합니다.

---

 2. 신뢰구간 시각화를 위한 함수 정의
- `lighten()` 함수:
  - 색상을 밝게 변환하여 그래프의 신뢰구간 표시를 위한 배경색으로 활용.
  
- `g_legend()` 함수:
  - 그래프의 범례를 추출하여 여러 그래프에서 범례를 공유할 수 있도록 함.

---

 3. 그래프 생성
 (a) 샘플 크기 150 (plot.n150)
- 신뢰구간:
  - `geom_ribbon()`을 사용해 예측값의 하한(`lower`)과 상한(`upper`)을 기준으로 신뢰구간을 그림.
  - `fill` 속성을 사용해 신뢰구간의 색상을 지정.

- 예측값 표시:
  - `geom_line()`을 사용해 예측값(`pe`)을 선형 그래프로 표시.
  - Low Z (-1 SD)는 점선(`dashed`), High Z (+1 SD)는 실선(`solid`)으로 구분.

- 축과 범위 설정:
  - x축은 `-3`에서 `3`까지 설정하고, `-2 SD`, `-1 SD`, `Mean`, `1 SD`, `2 SD` 등으로 라벨링.
  - y축의 값은 `-100`에서 `200`까지 제한.

- 테마:
  - `theme_bw()`를 사용해 그래프의 배경을 흰색으로 설정하고, 격자를 조정.

 (b) 샘플 크기 500 (plot.n500)
- `plot.n150`과 동일한 방법으로 생성하지만, `n500` 데이터를 사용.

---

 4. 범례 추가
- `g_legend()`를 사용해 `plot.n150`과 `plot.n500`에서 공유할 범례를 생성.
- 범례는 "Low Z (-1 SD)"와 "High Z (+1 SD)"로 표시.

---

 5. 최종 그래프 결합
- `grid.arrange()`를 사용해 두 그래프(plot.n150, plot.n500)와 범례를 결합.
- 결과적으로 두 샘플 크기에서의 신뢰구간 차이를 한 화면에 시각적으로 비교 가능.

---

 6. PDF로 저장
- `ggsave()`를 사용해 최종 그래프를 `fig3.pdf`로 저장.

---

 코드의 목적
이 코드는 샘플 크기가 작을수록 결과의 신뢰구간이 넓어져 불확실성이 증가함을 보여줍니다. 
이는 연구 설계에서 샘플 크기의 중요성을 강조하며, 데이터 분석 결과를 시각적으로 전달하기 위한 강력한 도구입니다.
